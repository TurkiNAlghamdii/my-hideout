(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5219:(e,a,r)=>{Promise.resolve().then(r.bind(r,2303))},6046:(e,a,r)=>{"use strict";var t=r(6658);r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}})},2303:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var t=r(5155),n=r(2115),i=r(6046),l=r(7873),s=r(4644),o=r(6240),c=r(3716),d=r.n(c);function u(){var e,a;let r=(0,i.useRouter)(),[c,u]=(0,n.useState)(!0),[_,h]=(0,n.useState)(null),[v,f]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),g=(0,n.useRef)(null),[N,j]=(0,n.useState)(!1),[x,C]=(0,n.useState)(""),[y,k]=(0,n.useState)(!1),[B,b]=(0,n.useState)("");(0,n.useEffect)(()=>((async()=>{try{let{data:{session:e}}=await l.N.auth.getSession();if(h(e),!e){r.push("/signin");return}let{data:a,error:t}=await l.N.from("profiles").select("*").eq("id",e.user.id).single();if(t)console.error("Error fetching profile:",t);else{f({username:(null==a?void 0:a.username)||"User",email:e.user.email||"",avatar_url:null});try{let{data:a}=await l.N.storage.from("profile-pictures").list("public");if(null==a?void 0:a.find(a=>a.name==="".concat(e.user.id,".png"))){let{data:a}=await l.N.storage.from("profile-pictures").download("public/".concat(e.user.id,".png"));if(a){let e=URL.createObjectURL(a);f(a=>a?{...a,avatar_url:e}:null)}}}catch(e){console.error("Storage error:",e)}}u(!1)}catch(e){console.error("Error checking auth:",e),r.push("/signin")}})(),()=>{(null==v?void 0:v.avatar_url)&&URL.revokeObjectURL(v.avatar_url)}),[r,null==v?void 0:v.avatar_url]);let I=async e=>{try{if(!e.target.files||0===e.target.files.length)return;p(!0);let a=e.target.files[0],r="public/".concat(_.user.id,".png"),{error:t}=await l.N.storage.from("profile-pictures").upload(r,a,{upsert:!0});if(t)throw t;let{data:n}=await l.N.storage.from("profile-pictures").download(r);if(n){let e=URL.createObjectURL(n);f(a=>a?{...a,avatar_url:e}:null)}}catch(e){console.error("Error uploading image:",e)}finally{p(!1)}},S=async()=>{if(x.trim())try{b(""),k(!0);let{data:{session:e}}=await l.N.auth.getSession();if(!e){b("Please sign in to update your username");return}let{data:a}=await l.N.from("profiles").select("id").eq("username",x.trim()).single();if(a){b("This username is already taken. Please choose another one.");return}let{error:r}=await l.N.from("profiles").update({username:x.trim()}).eq("id",e.user.id);if(r){b("Error updating username. Please try again.");return}f(e=>e?{...e,username:x.trim()}:null),j(!1)}catch(e){b("An unexpected error occurred. Please try again.")}finally{k(!1)}};return c?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900"})}):_?(0,t.jsxs)("div",{className:d().pageContainer,children:[(0,t.jsx)(s.A,{}),(0,t.jsx)("main",{className:d().mainContent,children:(0,t.jsxs)("div",{className:d().profileCard,children:[(0,t.jsx)("h2",{className:d().title,children:"Your Profile"}),(0,t.jsxs)("div",{className:d().avatarSection,children:[(0,t.jsxs)("div",{className:d().avatarContainer,onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},children:[(null==v?void 0:v.avatar_url)?(0,t.jsx)("img",{src:v.avatar_url,alt:"Profile",className:d().avatar}):(0,t.jsx)("div",{className:d().avatarPlaceholder,children:(null==v?void 0:null===(a=v.username)||void 0===a?void 0:null===(e=a[0])||void 0===e?void 0:e.toUpperCase())||"?"}),(0,t.jsx)("div",{className:d().avatarOverlay,children:m?"Uploading...":"Change Photo"})]}),(0,t.jsx)("input",{type:"file",ref:g,onChange:I,accept:"image/*",className:"hidden"})]}),(0,t.jsxs)("div",{className:d().infoSection,children:[(0,t.jsxs)("div",{className:d().infoItem,children:[(0,t.jsx)("label",{className:d().label,children:"Username"}),N?(0,t.jsxs)("div",{className:d().editContainer,children:[(0,t.jsx)("input",{type:"text",value:x,onChange:e=>C(e.target.value),className:d().editInput,placeholder:"Enter new username",autoFocus:!0}),B&&(0,t.jsx)("p",{className:d().errorMessage,children:B}),(0,t.jsxs)("div",{className:d().editButtons,children:[(0,t.jsx)("button",{onClick:S,disabled:y,className:d().saveButton,children:y?"Saving...":"Save"}),(0,t.jsx)("button",{onClick:()=>{j(!1),C(""),b("")},className:d().cancelButton,disabled:y,children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:d().valueContainer,children:[(0,t.jsx)("p",{className:d().value,children:null==v?void 0:v.username}),(0,t.jsx)("button",{onClick:()=>{C((null==v?void 0:v.username)||""),j(!0),b("")},className:d().editButton,children:"Edit"})]})]}),(0,t.jsxs)("div",{className:d().infoItem,children:[(0,t.jsx)("label",{className:d().label,children:"Email"}),(0,t.jsx)("p",{className:d().value,children:null==v?void 0:v.email})]})]})]})}),(0,t.jsx)(o.A,{})]}):null}},6240:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(5155),n=r(8173),i=r.n(n),l=r(397),s=r.n(l);let o=()=>(0,t.jsx)("footer",{className:s().footer,children:(0,t.jsx)("div",{className:s().container,children:(0,t.jsxs)("div",{className:s().content,children:[(0,t.jsxs)("p",{className:s().copyright,children:["\xa9 ",new Date().getFullYear()," Tobi. All rights reserved."]}),(0,t.jsxs)("div",{className:s().links,children:[(0,t.jsx)(i(),{href:"/privacy",className:s().link,children:"Privacy Policy"}),(0,t.jsx)(i(),{href:"/terms",className:s().link,children:"Terms of Service"}),(0,t.jsx)(i(),{href:"/contact",className:s().link,children:"Contact"})]})]})})})},4644:(e,a,r)=>{"use strict";r.d(a,{A:()=>d});var t=r(5155),n=r(8173),i=r.n(n),l=r(2115),s=r(7873),o=r(1165),c=r.n(o);let d=()=>{let[e,a]=(0,l.useState)(null);(0,l.useEffect)(()=>{s.N.auth.getSession().then(e=>{let{data:{session:r}}=e;a(r)});let{data:{subscription:e}}=s.N.auth.onAuthStateChange((e,r)=>{a(r)});return()=>e.unsubscribe()},[]);let r=async()=>{await s.N.auth.signOut()};return(0,t.jsx)("header",{className:c().header,children:(0,t.jsxs)("nav",{className:c().nav,children:[(0,t.jsx)(i(),{href:"/home",legacyBehavior:!0,children:(0,t.jsx)("a",{className:c().logo,children:"TOBI"})}),(0,t.jsxs)("div",{className:c().navLinks,children:[(0,t.jsx)(i(),{href:"/home",legacyBehavior:!0,children:(0,t.jsx)("a",{className:c().navLink,children:"Home"})}),(0,t.jsx)(i(),{href:"/projects",legacyBehavior:!0,children:(0,t.jsx)("a",{className:c().navLink,children:"Projects"})}),(0,t.jsx)(i(),{href:"/socials",legacyBehavior:!0,children:(0,t.jsx)("a",{className:c().navLink,children:"Socials"})})]}),(0,t.jsx)("div",{className:c().authButtons,children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{href:"/profile",legacyBehavior:!0,children:(0,t.jsx)("a",{className:c().navLink,children:"Profile"})}),(0,t.jsx)("button",{onClick:r,className:c().signOutButton,children:"Sign Out"})]}):(0,t.jsx)(i(),{href:"/signin",legacyBehavior:!0,children:(0,t.jsx)("a",{className:c().signInButton,children:"Sign In"})})})]})})}},7873:(e,a,r)=>{"use strict";r.d(a,{N:()=>t});let t=(0,r(5974).UU)("https://rechlvadwsjwxyhgksto.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlY2hsdmFkd3Nqd3h5aGdrc3RvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgwNjU0MzcsImV4cCI6MjA1MzY0MTQzN30.zahU6vhEBmLa2pYkPa48ZKQA3YPUQF8THgfNf-_n74c")},3716:e=>{e.exports={pageContainer:"profile_pageContainer__b2YYr",loadingContainer:"profile_loadingContainer__N3oLv",loadingSpinner:"profile_loadingSpinner__LmX3z",spin:"profile_spin__B8_d_",mainContent:"profile_mainContent__5hJnE",profileCard:"profile_profileCard__HJ2Cz",title:"profile_title__Qm44E",avatarSection:"profile_avatarSection__fZnTm",avatarContainer:"profile_avatarContainer__dZ232",avatar:"profile_avatar__f2UDF",avatarPlaceholder:"profile_avatarPlaceholder__7K8Y6",avatarOverlay:"profile_avatarOverlay__txKOM",infoSection:"profile_infoSection__P_hRi",infoItem:"profile_infoItem__FgGdu",label:"profile_label__fpdK1",value:"profile_value__XHvIw",hidden:"profile_hidden__Fpjnl",valueContainer:"profile_valueContainer__qe_1v",editContainer:"profile_editContainer__XI4Dn",editInput:"profile_editInput__FHQhW",editButtons:"profile_editButtons__GfXZk",editButton:"profile_editButton__oGUfC",saveButton:"profile_saveButton__Vp6f_",cancelButton:"profile_cancelButton__l62qO",errorMessage:"profile_errorMessage__3vub5"}},397:e=>{e.exports={footer:"Footer_footer__4vzqH",container:"Footer_container__Dj1D9",content:"Footer_content__a1cH7",copyright:"Footer_copyright__1v3uR",links:"Footer_links__LGHlK",link:"Footer_link__wByfM"}},1165:e=>{e.exports={header:"Header_header__AF_3G",container:"Header_container__3JNoS",logo:"Header_logo__1FRrW",nav:"Header_nav__LVYU2",navLinks:"Header_navLinks__vBy8d",authButtons:"Header_authButtons__2_7Ug",navLink:"Header_navLink__bX76H",profileButton:"Header_profileButton__xq6K0",signInButton:"Header_signInButton__dKagW",signOutButton:"Header_signOutButton__TFWkK",scrolled:"Header_scrolled__Ik5rI"}}},e=>{var a=a=>e(e.s=a);e.O(0,[915,736,173,441,517,358],()=>a(5219)),_N_E=e.O()}]);