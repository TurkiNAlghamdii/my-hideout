(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5219:(e,a,r)=>{Promise.resolve().then(r.bind(r,2303))},6046:(e,a,r)=>{"use strict";var n=r(6658);r.o(n,"useRouter")&&r.d(a,{useRouter:function(){return n.useRouter}})},2303:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var n=r(5155),i=r(2115),t=r(6046),l=r(7873),s=r(4644),o=r(6240),c=r(3716),d=r.n(c);let u=()=>{var e,a;let r=(0,t.useRouter)(),[c,u]=(0,i.useState)(!0),[_,h]=(0,i.useState)(null),[v,f]=(0,i.useState)(!1),m=(0,i.useRef)(null),[p,g]=(0,i.useState)(!1),[N,j]=(0,i.useState)(""),[x,C]=(0,i.useState)(!1),[y,k]=(0,i.useState)(""),B=async()=>{try{let{data:{session:e},error:a}=await l.N.auth.getSession();if(a||!e){r.push("/signin");return}let{data:n,error:i}=await l.N.from("profiles").select("*").eq("id",e.user.id).single();if(i){console.log("Error fetching profile:",i);return}h({username:n.username,email:e.user.email||"",avatar_url:null});try{let{data:a}=await l.N.storage.from("profile-pictures").list("public");if(null==a?void 0:a.find(a=>a.name==="".concat(e.user.id,".png"))){let{data:a,error:r}=await l.N.storage.from("profile-pictures").download("public/".concat(e.user.id,".png"));if(r)throw r;if(a){(null==_?void 0:_.avatar_url)&&URL.revokeObjectURL(_.avatar_url);let e=URL.createObjectURL(a);h(a=>({...a,avatar_url:e}))}}}catch(e){console.log("Storage error:",e),e instanceof Error&&(console.log("Error message:",e.message),console.log("Error name:",e.name))}}catch(e){console.log("Error in fetchProfile:",e)}finally{u(!1)}},I=async e=>{try{if(f(!0),!e.target.files||0===e.target.files.length)return;let a=e.target.files[0],{data:{session:r}}=await l.N.auth.getSession();if(!r){k("Please sign in to update your profile picture");return}let n="public/".concat(r.user.id,".png"),{error:i}=await l.N.storage.from("profile-pictures").upload(n,a,{upsert:!0});i?k("Error uploading profile picture: "+i.message):((null==_?void 0:_.avatar_url)&&URL.revokeObjectURL(_.avatar_url),await B())}catch(e){console.error("Error in handleImageChange:",e),k("An unexpected error occurred. Please try again.")}finally{f(!1)}},S=async()=>{if(N.trim())try{k(""),C(!0);let{data:{session:e}}=await l.N.auth.getSession();if(!e){k("Please sign in to update your username");return}let{data:a}=await l.N.from("profiles").select("id").eq("username",N.trim()).single();if(a){k("This username is already taken. Please choose another one.");return}let{error:r}=await l.N.from("profiles").update({username:N.trim()}).eq("id",e.user.id);if(r){k("Error updating username. Please try again.");return}h(e=>e?{...e,username:N.trim()}:null),g(!1)}catch(e){k("An unexpected error occurred. Please try again.")}finally{C(!1)}};return c?(0,n.jsx)("div",{className:d().loadingContainer,children:(0,n.jsx)("div",{className:d().loadingSpinner})}):(0,n.jsxs)("div",{className:d().pageContainer,children:[(0,n.jsx)(s.A,{}),(0,n.jsx)("main",{className:d().mainContent,children:(0,n.jsxs)("div",{className:d().profileCard,children:[(0,n.jsx)("h2",{className:d().title,children:"Your Profile"}),(0,n.jsxs)("div",{className:d().avatarSection,children:[(0,n.jsxs)("div",{className:d().avatarContainer,onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},children:[(null==_?void 0:_.avatar_url)?(0,n.jsx)("img",{src:_.avatar_url,alt:"Profile",className:d().avatar}):(0,n.jsx)("div",{className:d().avatarPlaceholder,children:(null==_?void 0:null===(a=_.username)||void 0===a?void 0:null===(e=a[0])||void 0===e?void 0:e.toUpperCase())||"?"}),(0,n.jsx)("div",{className:d().avatarOverlay,children:v?"Uploading...":"Change Photo"})]}),(0,n.jsx)("input",{type:"file",ref:m,onChange:I,accept:"image/*",className:"hidden"})]}),(0,n.jsxs)("div",{className:d().infoSection,children:[(0,n.jsxs)("div",{className:d().infoItem,children:[(0,n.jsx)("label",{className:d().label,children:"Username"}),p?(0,n.jsxs)("div",{className:d().editContainer,children:[(0,n.jsx)("input",{type:"text",value:N,onChange:e=>j(e.target.value),className:d().editInput,placeholder:"Enter new username",autoFocus:!0}),y&&(0,n.jsx)("p",{className:d().errorMessage,children:y}),(0,n.jsxs)("div",{className:d().editButtons,children:[(0,n.jsx)("button",{onClick:S,disabled:x,className:d().saveButton,children:x?"Saving...":"Save"}),(0,n.jsx)("button",{onClick:()=>{g(!1),j(""),k("")},className:d().cancelButton,disabled:x,children:"Cancel"})]})]}):(0,n.jsxs)("div",{className:d().valueContainer,children:[(0,n.jsx)("p",{className:d().value,children:null==_?void 0:_.username}),(0,n.jsx)("button",{onClick:()=>{j((null==_?void 0:_.username)||""),g(!0),k("")},className:d().editButton,children:"Edit"})]})]}),(0,n.jsxs)("div",{className:d().infoItem,children:[(0,n.jsx)("label",{className:d().label,children:"Email"}),(0,n.jsx)("p",{className:d().value,children:null==_?void 0:_.email})]})]})]})}),(0,n.jsx)(o.A,{})]})}},6240:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var n=r(5155),i=r(8173),t=r.n(i),l=r(397),s=r.n(l);let o=()=>(0,n.jsx)("footer",{className:s().footer,children:(0,n.jsx)("div",{className:s().container,children:(0,n.jsxs)("div",{className:s().content,children:[(0,n.jsxs)("p",{className:s().copyright,children:["\xa9 ",new Date().getFullYear()," Tobi. All rights reserved."]}),(0,n.jsxs)("div",{className:s().links,children:[(0,n.jsx)(t(),{href:"/privacy",className:s().link,children:"Privacy Policy"}),(0,n.jsx)(t(),{href:"/terms",className:s().link,children:"Terms of Service"}),(0,n.jsx)(t(),{href:"/contact",className:s().link,children:"Contact"})]})]})})})},4644:(e,a,r)=>{"use strict";r.d(a,{A:()=>d});var n=r(5155),i=r(8173),t=r.n(i),l=r(2115),s=r(7873),o=r(1165),c=r.n(o);let d=()=>{let[e,a]=(0,l.useState)(null);(0,l.useEffect)(()=>{s.N.auth.getSession().then(e=>{let{data:{session:r}}=e;a(r)});let{data:{subscription:e}}=s.N.auth.onAuthStateChange((e,r)=>{a(r)});return()=>e.unsubscribe()},[]);let r=async()=>{await s.N.auth.signOut()};return(0,n.jsx)("header",{className:c().header,children:(0,n.jsxs)("nav",{className:c().nav,children:[(0,n.jsx)(t(),{href:"/home",legacyBehavior:!0,children:(0,n.jsx)("a",{className:c().logo,children:"TOBI"})}),(0,n.jsxs)("div",{className:c().navLinks,children:[(0,n.jsx)(t(),{href:"/home",legacyBehavior:!0,children:(0,n.jsx)("a",{className:c().navLink,children:"Home"})}),(0,n.jsx)(t(),{href:"/projects",legacyBehavior:!0,children:(0,n.jsx)("a",{className:c().navLink,children:"Projects"})}),(0,n.jsx)(t(),{href:"/socials",legacyBehavior:!0,children:(0,n.jsx)("a",{className:c().navLink,children:"Socials"})})]}),(0,n.jsx)("div",{className:c().authButtons,children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t(),{href:"/profile",legacyBehavior:!0,children:(0,n.jsx)("a",{className:c().navLink,children:"Profile"})}),(0,n.jsx)("button",{onClick:r,className:c().signOutButton,children:"Sign Out"})]}):(0,n.jsx)(t(),{href:"/signin",legacyBehavior:!0,children:(0,n.jsx)("a",{className:c().signInButton,children:"Sign In"})})})]})})}},7873:(e,a,r)=>{"use strict";r.d(a,{N:()=>n});let n=(0,r(5974).UU)("https://rechlvadwsjwxyhgksto.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlY2hsdmFkd3Nqd3h5aGdrc3RvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgwNjU0MzcsImV4cCI6MjA1MzY0MTQzN30.zahU6vhEBmLa2pYkPa48ZKQA3YPUQF8THgfNf-_n74c")},3716:e=>{e.exports={pageContainer:"profile_pageContainer__b2YYr",loadingContainer:"profile_loadingContainer__N3oLv",loadingSpinner:"profile_loadingSpinner__LmX3z",spin:"profile_spin__B8_d_",mainContent:"profile_mainContent__5hJnE",profileCard:"profile_profileCard__HJ2Cz",title:"profile_title__Qm44E",avatarSection:"profile_avatarSection__fZnTm",avatarContainer:"profile_avatarContainer__dZ232",avatar:"profile_avatar__f2UDF",avatarPlaceholder:"profile_avatarPlaceholder__7K8Y6",avatarOverlay:"profile_avatarOverlay__txKOM",infoSection:"profile_infoSection__P_hRi",infoItem:"profile_infoItem__FgGdu",label:"profile_label__fpdK1",value:"profile_value__XHvIw",hidden:"profile_hidden__Fpjnl",valueContainer:"profile_valueContainer__qe_1v",editContainer:"profile_editContainer__XI4Dn",editInput:"profile_editInput__FHQhW",editButtons:"profile_editButtons__GfXZk",editButton:"profile_editButton__oGUfC",saveButton:"profile_saveButton__Vp6f_",cancelButton:"profile_cancelButton__l62qO",errorMessage:"profile_errorMessage__3vub5"}},397:e=>{e.exports={footer:"Footer_footer__4vzqH",container:"Footer_container__Dj1D9",content:"Footer_content__a1cH7",copyright:"Footer_copyright__1v3uR",links:"Footer_links__LGHlK",link:"Footer_link__wByfM"}},1165:e=>{e.exports={header:"Header_header__AF_3G",container:"Header_container__3JNoS",logo:"Header_logo__1FRrW",nav:"Header_nav__LVYU2",navLinks:"Header_navLinks__vBy8d",authButtons:"Header_authButtons__2_7Ug",navLink:"Header_navLink__bX76H",profileButton:"Header_profileButton__xq6K0",signInButton:"Header_signInButton__dKagW",signOutButton:"Header_signOutButton__TFWkK",scrolled:"Header_scrolled__Ik5rI"}}},e=>{var a=a=>e(e.s=a);e.O(0,[915,736,173,441,517,358],()=>a(5219)),_N_E=e.O()}]);